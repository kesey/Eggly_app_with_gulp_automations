"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(r,e,t){"use strict";function n(r,e){return N(new(N(function(){},{prototype:r})),e)}function o(r){return I(arguments,function(e){e!==r&&I(e,function(e,t){r.hasOwnProperty(t)||(r[t]=e)})}),r}function a(r,e){var t=[];for(var n in r.path){if(r.path[n]!==e.path[n])break;t.push(r.path[n])}return t}function i(r,e){if(Array.prototype.indexOf)return r.indexOf(e,Number(arguments[2])||0);var t=r.length>>>0,n=Number(arguments[2])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in r&&r[n]===e)return n;return-1}function u(r,e,t,n){var o,u=a(t,n),s={},l=[];for(var c in u)if(u[c].params&&u[c].params.length){o=u[c].params;for(var f in o)i(l,o[f])>=0||(l.push(o[f]),s[o[f]]=r[o[f]])}return N({},s,e)}function s(r,e){var t={};return I(r,function(r){var n=e[r];t[r]=null!=n?String(n):null}),t}function l(r,e,t){if(!t){t=[];for(var n in r)t.push(n)}for(var o=0;o<t.length;o++){var a=t[o];if(r[a]!=e[a])return!1}return!0}function c(r,e){var t={};return I(r,function(r){t[r]=e[r]}),t}function f(r,e){var n=1,a=2,i={},u=[],s=i,l=N(r.when(i),{$$promises:i,$$values:i});this.study=function(i){function c(r,t){if(p[t]!==a){if(h.push(t),p[t]===n)throw h.splice(0,h.indexOf(t)),new Error("Cyclic dependency: "+h.join(" -> "));if(p[t]=n,O(r))m.push(t,[function(){return e.get(r)}],u);else{var o=e.annotate(r);I(o,function(r){r!==t&&i.hasOwnProperty(r)&&c(i[r],r)}),m.push(t,r,o)}h.pop(),p[t]=a}}function f(r){return M(r)&&r.then&&r.$$promises}if(!M(i))throw new Error("'invocables' must be an object");var m=[],h=[],p={};return I(i,c),i=h=p=null,function(n,a,i){function u(){--g||(k||o($,a.$$values),v.$$values=$,v.$$promises=!0,p.resolve($))}function c(r){v.$$failure=r,p.reject(r)}function h(t,o,a){function s(r){f.reject(r),c(r)}function l(){if(!j(v.$$failure))try{f.resolve(e.invoke(o,i,$)),f.promise.then(function(r){$[t]=r,u()},s)}catch(r){s(r)}}var f=r.defer(),m=0;I(a,function(r){d.hasOwnProperty(r)&&!n.hasOwnProperty(r)&&(m++,d[r].then(function(e){$[r]=e,--m||l()},s))}),m||l(),d[t]=f.promise}if(f(n)&&i===t&&(i=a,a=n,n=null),n){if(!M(n))throw new Error("'locals' must be an object")}else n=s;if(a){if(!f(a))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else a=l;var p=r.defer(),v=p.promise,d=v.$$promises={},$=N({},n),g=1+m.length/3,k=!1;if(j(a.$$failure))return c(a.$$failure),v;a.$$values?(k=o($,a.$$values),u()):(N(d,a.$$promises),a.then(u,c));for(var w=0,b=m.length;b>w;w+=3)n.hasOwnProperty(m[w])?u():h(m[w],m[w+1],m[w+2]);return v}},this.resolve=function(r,e,t,n){return this.study(r)(e,t,n)}}function m(r,e,t){this.fromConfig=function(r,e,t){return j(r.template)?this.fromString(r.template,e):j(r.templateUrl)?this.fromUrl(r.templateUrl,e):j(r.templateProvider)?this.fromProvider(r.templateProvider,e,t):null},this.fromString=function(r,e){return B(r)?r(e):r},this.fromUrl=function(t,n){return B(t)&&(t=t(n)),null==t?null:r.get(t,{cache:e}).then(function(r){return r.data})},this.fromProvider=function(r,e,n){return t.invoke(r,null,n||{params:e})}}function h(r){function e(e){if(!/^\w+(-+\w+)*$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+r+"'");if(a[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+r+"'");a[e]=!0,l.push(e)}function t(r){return r.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var n,o=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,a={},i="^",u=0,s=this.segments=[],l=this.params=[];this.source=r;for(var c,f,m;(n=o.exec(r))&&(c=n[2]||n[3],f=n[4]||("*"==n[1]?".*":"[^/]*"),m=r.substring(u,n.index),!(m.indexOf("?")>=0));)i+=t(m)+"("+f+")",e(c),s.push(m),u=o.lastIndex;m=r.substring(u);var h=m.indexOf("?");if(h>=0){var p=this.sourceSearch=m.substring(h);m=m.substring(0,h),this.sourcePath=r.substring(0,u+h),I(p.substring(1).split(/[&?]/),e)}else this.sourcePath=r,this.sourceSearch="";i+=t(m)+"$",s.push(m),this.regexp=new RegExp(i),this.prefix=s[0]}function p(){this.compile=function(r){return new h(r)},this.isMatcher=function(r){return M(r)&&B(r.exec)&&B(r.format)&&B(r.concat)},this.$get=function(){return this}}function v(r){function e(r){var e=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(r.source);return null!=e?e[1].replace(/\\(.)/g,"$1"):""}function t(r,e){return r.replace(/\$(\$|\d{1,2})/,function(r,t){return e["$"===t?0:Number(t)]})}function n(r,e,t){if(!t)return!1;var n=r.invoke(e,e,{$match:t});return j(n)?n:!0}var o=[],a=null;this.rule=function(r){if(!B(r))throw new Error("'rule' must be a function");return o.push(r),this},this.otherwise=function(r){if(O(r)){var e=r;r=function(){return e}}else if(!B(r))throw new Error("'rule' must be a function");return a=r,this},this.when=function(o,a){var i,u=O(a);if(O(o)&&(o=r.compile(o)),!u&&!B(a)&&!A(a))throw new Error("invalid 'handler' in when()");var s={matcher:function(e,t){return u&&(i=r.compile(t),t=["$match",function(r){return i.format(r)}]),N(function(r,o){return n(r,t,e.exec(o.path(),o.search()))},{prefix:O(e.prefix)?e.prefix:""})},regex:function(r,o){if(r.global||r.sticky)throw new Error("when() RegExp must not be global or sticky");return u&&(i=o,o=["$match",function(r){return t(i,r)}]),N(function(e,t){return n(e,o,r.exec(t.path()))},{prefix:e(r)})}},l={matcher:r.isMatcher(o),regex:o instanceof RegExp};for(var c in l)if(l[c])return this.rule(s[c](o,a));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(r,e,t){function n(e){function n(e){var n=e(t,r);return n?(O(n)&&r.replace().url(n),!0):!1}if(!e||!e.defaultPrevented){var i,u=o.length;for(i=0;u>i;i++)if(n(o[i]))return;a&&n(a)}}return e.$on("$locationChangeSuccess",n),{sync:function(){n()}}}]}function d(r,o,a){function i(r){return 0===r.indexOf(".")||0===r.indexOf("^")}function f(r,e){var n=O(r),o=n?r:r.name,a=i(o);if(a){if(!e)throw new Error("No reference point given for path '"+o+"'");for(var u=o.split("."),s=0,l=u.length,c=e;l>s;s++)if(""!==u[s]||0!==s){if("^"!==u[s])break;if(!c.parent)throw new Error("Path '"+o+"' not valid for state '"+e.name+"'");c=c.parent}else c=e;u=u.slice(s).join("."),o=c.name+(c.name&&u?".":"")+u}var f=y[o];return!f||!n&&(n||f!==r&&f.self!==r)?t:f}function m(r,e){C[r]||(C[r]=[]),C[r].push(e)}function h(e){e=n(e,{self:e,resolve:e.resolve||{},toString:function(){return this.name}});var t=e.name;if(!O(t)||t.indexOf("@")>=0)throw new Error("State must have a valid name");if(y.hasOwnProperty(t))throw new Error("State '"+t+"'' is already defined");var o=-1!==t.indexOf(".")?t.substring(0,t.lastIndexOf(".")):O(e.parent)?e.parent:"";if(o&&!y[o])return m(o,e.self);for(var a in x)B(x[a])&&(e[a]=x[a](e,x.$delegates[a]));if(y[t]=e,!e[E]&&e.url&&r.when(e.url,["$match","$stateParams",function(r,t){b.$current.navigable==e&&l(r,t)||b.transitionTo(e,r,{location:!1})}]),C[t])for(var i=0;i<C[t].length;i++)h(C[t][i]);return e}function p(r){return r.indexOf("*")>-1}function v(r){var e=r.split("."),t=b.$current.name.split(".");if("**"===e[0]&&(t=t.slice(t.indexOf(e[1])),t.unshift("**")),"**"===e[e.length-1]&&(t.splice(t.indexOf(e[e.length-2])+1,Number.MAX_VALUE),t.push("**")),e.length!=t.length)return!1;for(var n=0,o=e.length;o>n;n++)"*"===e[n]&&(t[n]="*");return t.join("")===e.join("")}function d(r,e){return O(r)&&!j(e)?x[r]:B(e)&&O(r)?(x[r]&&!x.$delegates[r]&&(x.$delegates[r]=x[r]),x[r]=e,this):this}function $(r,e){return M(r)?e=r:e.name=r,h(e),this}function g(r,o,i,m,h,d,$,g,C){function x(){$.url()!==L&&($.url(L),$.replace())}function P(r,t,n,a,u){var s=n?t:c(r.params,t),l={$stateParams:s};u.resolve=h.resolve(r.resolve,l,u.resolve,r);var f=[u.resolve.then(function(r){u.globals=r})];return a&&f.push(a),I(r.views,function(t,n){var o=t.resolve&&t.resolve!==r.resolve?t.resolve:{};o.$template=[function(){return i.load(n,{view:t,locals:l,params:s,notify:!1})||""}],f.push(h.resolve(o,l,u.resolve,r).then(function(a){if(B(t.controllerProvider)||A(t.controllerProvider)){var i=e.extend({},o,l);a.$$controller=m.invoke(t.controllerProvider,null,i)}else a.$$controller=t.controller;a.$$state=r,a.$$controllerAs=t.controllerAs,u[n]=a}))}),o.all(f).then(function(){return u})}var S=o.reject(new Error("transition superseded")),M=o.reject(new Error("transition prevented")),V=o.reject(new Error("transition aborted")),F=o.reject(new Error("transition failed")),L=$.url(),R=C.baseHref();return w.locals={resolve:null,globals:{$stateParams:{}}},b={params:{},current:w.self,$current:w,transition:null},b.reload=function(){b.transitionTo(b.current,d,{reload:!0,inherit:!1,notify:!1})},b.go=function(r,e,t){return this.transitionTo(r,e,N({inherit:!0,relative:b.$current},t))},b.transitionTo=function(e,t,a){t=t||{},a=N({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},a||{});var i,c=b.$current,h=b.params,p=c.path,v=f(e,a.relative);if(!j(v)){var g={to:e,toParams:t,options:a};if(i=r.$broadcast("$stateNotFound",g,c.self,h),i.defaultPrevented)return x(),V;if(i.retry){if(a.$retry)return x(),F;var y=b.transition=o.when(i.retry);return y.then(function(){return y!==b.transition?S:(g.options.$retry=!0,b.transitionTo(g.to,g.toParams,g.options))},function(){return V}),x(),y}if(e=g.to,t=g.toParams,a=g.options,v=f(e,a.relative),!j(v)){if(a.relative)throw new Error("Could not resolve '"+e+"' from state '"+a.relative+"'");throw new Error("No such state '"+e+"'")}}if(v[E])throw new Error("Cannot transition to abstract state '"+e+"'");a.inherit&&(t=u(d,t||{},b.$current,v)),e=v;var C,B,O=e.path,A=w.locals,I=[];for(C=0,B=O[C];B&&B===p[C]&&l(t,h,B.ownParams)&&!a.reload;C++,B=O[C])A=I[C]=B.locals;if(k(e,c,A,a))return e.self.reloadOnSearch!==!1&&x(),b.transition=null,o.when(b.current);if(t=s(e.params,t||{}),a.notify&&(i=r.$broadcast("$stateChangeStart",e.self,t,c.self,h),i.defaultPrevented))return x(),M;for(var R=o.when(A),T=C;T<O.length;T++,B=O[T])A=I[T]=n(A),R=P(B,t,B===e,R,A);var q=b.transition=R.then(function(){var n,o,i;if(b.transition!==q)return S;for(n=p.length-1;n>=C;n--)i=p[n],i.self.onExit&&m.invoke(i.self.onExit,i.self,i.locals.globals),i.locals=null;for(n=C;n<O.length;n++)o=O[n],o.locals=I[n],o.self.onEnter&&m.invoke(o.self.onEnter,o.self,o.locals.globals);if(b.transition!==q)return S;b.$current=e,b.current=e.self,b.params=t,U(b.params,d),b.transition=null;var u=e.navigable;return a.location&&u&&($.url(u.url.format(u.locals.globals.$stateParams)),"replace"===a.location&&$.replace()),a.notify&&r.$broadcast("$stateChangeSuccess",e.self,t,c.self,h),L=$.url(),b.current},function(n){return b.transition!==q?S:(b.transition=null,r.$broadcast("$stateChangeError",e.self,t,c.self,h,n),x(),o.reject(n))});return q},b.is=function(r,n){var o=f(r);return j(o)?b.$current!==o?!1:j(n)&&null!==n?e.equals(d,n):!0:t},b.includes=function(r,n){if(O(r)&&p(r)){if(!v(r))return!1;r=b.$current.name}var o=f(r);if(!j(o))return t;if(!j(b.$current.includes[o.name]))return!1;var a=!0;return e.forEach(n,function(r,e){j(d[e])&&d[e]===r||(a=!1)}),a},b.href=function(r,e,t){t=N({lossy:!0,inherit:!1,absolute:!1,relative:b.$current},t||{});var n=f(r,t.relative);if(!j(n))return null;e=u(d,e||{},b.$current,n);var o=n&&t.lossy?n.navigable:n,i=o&&o.url?o.url.format(s(n.params,e||{})):null;return!a.html5Mode()&&i&&(i="#"+a.hashPrefix()+i),"/"!==R&&(a.html5Mode()?i=R.slice(0,-1)+i:t.absolute&&(i=R.slice(1)+i)),t.absolute&&i&&(i=$.protocol()+"://"+$.host()+(80==$.port()||443==$.port()?"":":"+$.port())+(!a.html5Mode()&&i?"/":"")+i),i},b.get=function(r,e){if(!j(r)){var t=[];return I(y,function(r){t.push(r.self)}),t}var n=f(r,e);return n&&n.self?n.self:null},b}function k(r,e,t,n){return r!==e||(t!==e.locals||n.reload)&&r.self.reloadOnSearch!==!1?void 0:!0}var w,b,y={},C={},E="abstract",x={parent:function(r){if(j(r.parent)&&r.parent)return f(r.parent);var e=/^(.+)\.[^.]+$/.exec(r.name);return e?f(e[1]):w},data:function(r){return r.parent&&r.parent.data&&(r.data=r.self.data=N({},r.parent.data,r.data)),r.data},url:function(r){var e=r.url;if(O(e))return"^"==e.charAt(0)?o.compile(e.substring(1)):(r.parent.navigable||w).url.concat(e);if(o.isMatcher(e)||null==e)return e;throw new Error("Invalid url '"+e+"' in state '"+r+"'")},navigable:function(r){return r.url?r:r.parent?r.parent.navigable:null},params:function(r){if(!r.params)return r.url?r.url.parameters():r.parent.params;if(!A(r.params))throw new Error("Invalid params in state '"+r+"'");if(r.url)throw new Error("Both params and url specicified in state '"+r+"'");return r.params},views:function(r){var e={};return I(j(r.views)?r.views:{"":r},function(t,n){n.indexOf("@")<0&&(n+="@"+r.parent.name),e[n]=t}),e},ownParams:function(r){if(!r.parent)return r.params;var e={};I(r.params,function(r){e[r]=!0}),I(r.parent.params,function(t){if(!e[t])throw new Error("Missing required parameter '"+t+"' in state '"+r.name+"'");e[t]=!1});var t=[];return I(e,function(r,e){r&&t.push(e)}),t},path:function(r){return r.parent?r.parent.path.concat(r):[]},includes:function(r){var e=r.parent?N({},r.parent.includes):{};return e[r.name]=!0,e},$delegates:{}};w=h({name:"",url:"^",views:null,"abstract":!0}),w.navigable=null,this.decorator=d,this.state=$,this.$get=g,g.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter","$browser"]}function $(){function r(r,e){return{load:function(t,n){var o,a={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return n=N(a,n),n.view&&(o=e.fromConfig(n.view,n.params,n.locals)),o&&n.notify&&r.$broadcast("$viewContentLoading",n),o}}}this.$get=r,r.$inject=["$rootScope","$templateFactory"]}function g(){var r=!1;this.useAnchorScroll=function(){r=!0},this.$get=["$anchorScroll","$timeout",function(e,t){return r?e:function(r){t(function(){r[0].scrollIntoView()},0,!1)}}]}function k(r,t,n){function o(){return t.has?function(r){return t.has(r)?t.get(r):null}:function(r){try{return t.get(r)}catch(e){return null}}}function a(r,e){var t=function(){return{enter:function(r,e,t){e.after(r),t()},leave:function(r,e){r.remove(),e()}}};if(s)return{enter:function(r,e,t){s.enter(r,null,e,t)},leave:function(r,e){s.leave(r,e)}};if(u){var n=u&&u(e,r);return{enter:function(r,e,t){n.enter(r,null,e),t()},leave:function(r,e){n.leave(r),e()}}}return t()}var i=o(),u=i("$animator"),s=i("$animate"),l={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(t,o,i){return function(t,o,u){function s(){c&&(c.remove(),c=null),m&&(m.$destroy(),m=null),f&&(d.leave(f,function(){c=null}),c=f,f=null)}function l(a){var u=t.$new(),l=f&&f.data("$uiViewName"),c=l&&r.$current&&r.$current.locals[l];if(a||c!==h){var $=i(u,function(r){d.enter(r,o,function(){(e.isDefined(v)&&!v||t.$eval(v))&&n(r)}),s()});h=r.$current.locals[$.data("$uiViewName")],f=$,m=u,m.$emit("$viewContentLoaded"),m.$eval(p)}}var c,f,m,h,p=u.onload||"",v=u.autoscroll,d=a(u,t);t.$on("$stateChangeSuccess",function(){l(!1)}),t.$on("$viewContentLoading",function(){l(!1)}),l(!0)}}};return l}function w(r,e,t){return{restrict:"ECA",priority:-400,compile:function(n){var o=n.html();return function(n,a,i){var u=i.uiView||i.name||"",s=a.inheritedData("$uiView");u.indexOf("@")<0&&(u=u+"@"+(s?s.state.name:"")),a.data("$uiViewName",u);var l=t.$current,c=l&&l.locals[u];if(c){a.data("$uiView",{name:u,state:c.$$state}),a.html(c.$template?c.$template:o);var f=r(a.contents());if(c.$$controller){c.$scope=n;var m=e(c.$$controller,c);c.$$controllerAs&&(n[c.$$controllerAs]=m),a.data("$ngControllerController",m),a.children().data("$ngControllerController",m)}f(n)}}}}}function b(r){var e=r.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!e||4!==e.length)throw new Error("Invalid state ref '"+r+"'");return{state:e[1],paramExpr:e[3]||null}}function y(r){var e=r.parent().inheritedData("$uiView");return e&&e.state&&e.state.name?e.state:void 0}function C(r,t){var n=["location","inherit","reload"];return{restrict:"A",require:"?^uiSrefActive",link:function(o,a,i,u){var s=b(i.uiSref),l=null,c=y(a)||r.$current,f="FORM"===a[0].nodeName,m=f?"action":"href",h=!0,p={relative:c},v=o.$eval(i.uiSrefOpts)||{};e.forEach(n,function(r){r in v&&(p[r]=v[r])});var d=function(e){if(e&&(l=e),h){var t=r.href(s.state,l,p);return u&&u.$$setStateInfo(s.state,l),t?void(a[0][m]=t):(h=!1,!1)}};s.paramExpr&&(o.$watch(s.paramExpr,function(r){r!==l&&d(r)},!0),l=o.$eval(s.paramExpr)),d(),f||a.bind("click",function(e){var n=e.which||e.button;n>1||e.ctrlKey||e.metaKey||e.shiftKey||a.attr("target")||(t(function(){r.go(s.state,l,p)}),e.preventDefault())})}}}function E(r,e,t){return{restrict:"A",controller:["$scope","$element","$attrs",function(n,o,a){function i(){r.$current.self===s&&u()?o.addClass(f):o.removeClass(f)}function u(){return!c||l(c,e)}var s,c,f;f=t(a.uiSrefActive||"",!1)(n),this.$$setStateInfo=function(e,t){s=r.get(e,y(o)),c=t,i()},n.$on("$stateChangeSuccess",i)}]}}function x(r){return function(e){return r.is(e)}}function P(r){return function(e){return r.includes(e)}}function S(r,e){function o(r){this.locals=r.locals.globals,this.params=this.locals.$stateParams}function a(){this.locals=null,this.params=null}function i(t,i){if(null!=i.redirectTo){var u,l=i.redirectTo;if(O(l))u=l;else{if(!B(l))throw new Error("Invalid 'redirectTo' in when()");u=function(r,e){return l(r,e.path(),e.search())}}e.when(t,u)}else r.state(n(i,{parent:null,name:"route:"+encodeURIComponent(t),url:t,onEnter:o,onExit:a}));return s.push(i),this}function u(r,e,n){function o(r){return""!==r.name?r:t}var a={routes:s,params:n,current:t};return e.$on("$stateChangeStart",function(r,t,n,a){e.$broadcast("$routeChangeStart",o(t),o(a))}),e.$on("$stateChangeSuccess",function(r,t,n,i){a.current=o(t),e.$broadcast("$routeChangeSuccess",o(t),o(i)),U(n,a.params)}),e.$on("$stateChangeError",function(r,t,n,a,i,u){e.$broadcast("$routeChangeError",o(t),o(a),u)}),a}var s=[];o.$inject=["$$state"],this.when=i,this.$get=u,u.$inject=["$state","$rootScope","$routeParams"]}var j=e.isDefined,B=e.isFunction,O=e.isString,M=e.isObject,A=e.isArray,I=e.forEach,N=e.extend,U=e.copy;e.module("ui.router.util",["ng"]),e.module("ui.router.router",["ui.router.util"]),e.module("ui.router.state",["ui.router.router","ui.router.util"]),e.module("ui.router",["ui.router.state"]),e.module("ui.router.compat",["ui.router"]),f.$inject=["$q","$injector"],e.module("ui.router.util").service("$resolve",f),m.$inject=["$http","$templateCache","$injector"],e.module("ui.router.util").service("$templateFactory",m),h.prototype.concat=function(r){return new h(this.sourcePath+r+this.sourceSearch)},h.prototype.toString=function(){return this.source},h.prototype.exec=function(r,e){var t=this.regexp.exec(r);if(!t)return null;var n,o=this.params,a=o.length,i=this.segments.length-1,u={};if(i!==t.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(n=0;i>n;n++)u[o[n]]=t[n+1];for(;a>n;n++)u[o[n]]=e[o[n]];return u},h.prototype.parameters=function(){return this.params},h.prototype.format=function(r){var e=this.segments,t=this.params;if(!r)return e.join("");var n,o,a,i=e.length-1,u=t.length,s=e[0];for(n=0;i>n;n++)a=r[t[n]],null!=a&&(s+=encodeURIComponent(a)),s+=e[n+1];for(;u>n;n++)a=r[t[n]],null!=a&&(s+=(o?"&":"?")+t[n]+"="+encodeURIComponent(a),o=!0);return s},e.module("ui.router.util").provider("$urlMatcherFactory",p),v.$inject=["$urlMatcherFactoryProvider"],e.module("ui.router.router").provider("$urlRouter",v),d.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],e.module("ui.router.state").value("$stateParams",{}).provider("$state",d),$.$inject=[],e.module("ui.router.state").provider("$view",$),e.module("ui.router.state").provider("$uiViewScroll",g),k.$inject=["$state","$injector","$uiViewScroll"],w.$inject=["$compile","$controller","$state"],e.module("ui.router.state").directive("uiView",k),e.module("ui.router.state").directive("uiView",w),C.$inject=["$state","$timeout"],E.$inject=["$state","$stateParams","$interpolate"],e.module("ui.router.state").directive("uiSref",C).directive("uiSrefActive",E),x.$inject=["$state"],P.$inject=["$state"],e.module("ui.router.state").filter("isState",x).filter("includedByState",P),S.$inject=["$stateProvider","$urlRouterProvider"],e.module("ui.router.compat").provider("$route",S).directive("ngView",k)}(window,window.angular),angular.module("categories",["eggly.models.categories"]).config(["$stateProvider",function(r){r.state("eggly.categories",{url:"/",views:{"categories@":{controller:"CategoriesListCtrl as categoriesListCtrl",templateUrl:"app/categories/categories.tmpl.html"},"bookmarks@":{controller:"BookmarksListCtrl as bookmarksListCtrl",templateUrl:"app/categories/bookmarks/bookmarks.tmpl.html"}}})}]).controller("CategoriesListCtrl",["CategoriesModel",function(r){var e=this;r.getCategories().then(function(r){e.categories=r})}]),angular.module("categories.bookmarks",["categories.bookmarks.create","categories.bookmarks.edit","eggly.models.bookmarks"]).config(["$stateProvider",function(r){r.state("eggly.categories.bookmarks",{url:"categories/:category",views:{"bookmarks@":{templateUrl:"app/categories/bookmarks/bookmarks.tmpl.html",controller:"BookmarksListCtrl as bookmarksListCtrl"}}})}]).controller("BookmarksListCtrl",["$stateParams","BookmarksModel","CategoriesModel",function(r,e,t){var n=this;t.setCurrentCategory(r.category),e.getBookmarks().then(function(r){n.bookmarks=r}),n.getCurrentCategory=t.getCurrentCategory,n.getCurrentCategoryName=t.getCurrentCategoryName,n.deleteBookmark=e.deleteBookmark}]),angular.module("eggly.models.bookmarks",[]).service("BookmarksModel",["$http","$q",function(r,e){function t(r){return r.data}function n(r){return a=t(r)}function o(r){return _.find(a,function(e){return e.id===parseInt(r,10)})}var a,i=this,u={FETCH:"data/bookmarks.json"};i.getBookmarkById=function(r){var t=e.defer();return a?t.resolve(o(r)):i.getBookmarks().then(function(){t.resolve(o(r))}),t.promise},i.getBookmarks=function(){var t=e.defer();return a?t.resolve(a):r.get(u.FETCH).then(function(r){t.resolve(n(r))}),t.promise},i.createBookmark=function(r){r.id=a.length,a.push(r)},i.updateBookmark=function(r){var e=_.findIndex(a,function(e){return e.id===r.id});a[e]=r},i.deleteBookmark=function(r){_.remove(a,function(e){return e.id==r.id})}}]),angular.module("eggly.models.categories",[]).service("CategoriesModel",["$http","$q",function(r,e){function t(r){return r.data}function n(r){return o=t(r)}var o,a,i=this,u={FETCH:"data/categories.json"};i.getCategories=function(){return o?e.when(o):r.get(u.FETCH).then(n)},i.setCurrentCategory=function(r){return i.getCategoryByName(r).then(function(r){a=r})},i.getCurrentCategory=function(){return a},i.getCurrentCategoryName=function(){return a?a.name:""},i.getCategoryByName=function(r){function t(){return _.find(o,function(e){return e.name==r})}var n=e.defer();return o?n.resolve(t()):i.getCategories().then(function(){n.resolve(t())}),n.promise}}]),angular.module("categories.bookmarks.create",[]).config(["$stateProvider",function(r){r.state("eggly.categories.bookmarks.create",{url:"/bookmarks/create",templateUrl:"app/categories/bookmarks/create/bookmark-create.tmpl.html",controller:"CreateBookmarkCtrl as createBookmarkCtrl"})}]).controller("CreateBookmarkCtrl",["$state","$stateParams","BookmarksModel",function(r,e,t){function n(){r.go("eggly.categories.bookmarks",{category:e.category})}function o(){n()}function a(r){t.createBookmark(r),n()}function i(){u.newBookmark={title:"",url:"",category:e.category}}var u=this;u.cancelCreating=o,u.createBookmark=a,i()}]),angular.module("categories.bookmarks.edit",[]).config(["$stateProvider",function(r){r.state("eggly.categories.bookmarks.edit",{url:"/bookmarks/:bookmarkId/edit",templateUrl:"app/categories/bookmarks/edit/bookmark-edit.tmpl.html",controller:"EditBookmarkCtrl as editBookmarkCtrl"})}]).controller("EditBookmarkCtrl",["$state","$stateParams","BookmarksModel",function(r,e,t){function n(){r.go("eggly.categories.bookmarks",{category:e.category})}function o(){n()}function a(){i.bookmark=angular.copy(i.editedBookmark),t.updateBookmark(i.bookmark),n()}var i=this;i.cancelEditing=o,t.getBookmarkById(e.bookmarkId).then(function(r){r?(i.bookmark=r,i.editedBookmark=angular.copy(i.bookmark)):n()}),i.updateBookmark=a}]),angular.module("Eggly",["ngAnimate","ui.router","categories","categories.bookmarks"]).config(["$stateProvider","$urlRouterProvider",function(r,e){r.state("eggly",{url:"","abstract":!0}),e.otherwise("/")}]);